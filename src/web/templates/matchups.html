{% extends "base.html" %}
{% block content %}
<section class="card">
  <h2>Matchups</h2>
  <form method="get" action="/matchups" class="form-row">
    <label>Home team
      <select name="home_team_id">
        {% for t in teams %}
          <option value="{{ t.id }}" {% if home_team_id == t.id %}selected{% endif %}>{{ t.abbr }} - {{ t.name }}</option>
        {% endfor %}
      </select>
    </label>
    <label>Away team
      <select name="away_team_id">
        {% for t in teams %}
          <option value="{{ t.id }}" {% if away_team_id == t.id %}selected{% endif %}>{{ t.abbr }} - {{ t.name }}</option>
        {% endfor %}
      </select>
    </label>
    <button type="submit">Analyze Matchup</button>
  </form>

  {% if prediction %}
    <div class="grid two">
      <div>
        <h3>Projection</h3>
        <p><strong>Spread (home):</strong> {{ "%.1f"|format(prediction.predicted_spread) }}</p>
        <p><strong>Total:</strong> {{ "%.1f"|format(prediction.predicted_total) }}</p>
      </div>
      <div>
        <h3>Context</h3>
        <p>Uses current roster (non-injured players) and recent stats.</p>
      </div>
    </div>
  {% elif error %}
    <p class="error">{{ error }}</p>
  {% else %}
    <p>Select teams to generate a projection.</p>
  {% endif %}
</section>

<section class="card">
  <h3>Upcoming Games (first 100)</h3>
  {% if games %}
    <table>
      <thead><tr><th>Date</th><th>Home</th><th>Away</th></tr></thead>
      <tbody>
        {% for g in games %}
          <tr>
            <td>{{ g.game_date }}</td>
            <td>{{ g.home_abbr }}</td>
            <td>{{ g.away_abbr }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No games available. Run schedule sync.</p>
  {% endif %}
</section>
{% endblock %}
